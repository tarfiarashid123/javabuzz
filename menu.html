<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Our Coffee Menu - Java Buzz | Premium Coffee Selection</title>
    <meta name="description" content="Explore Java Buzz's extensive coffee menu featuring espresso, cappuccino, latte, cold brew, mocha, americano, and specialty coffee drinks. Freshly brewed daily.">
    <meta name="keywords" content="coffee menu, espresso drinks, cappuccino, latte, cold brew, mocha, americano, macchiato, flat white, affogato, coffee shop menu">
    <meta name="author" content="Java Buzz Coffee">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Java Buzz Coffee Menu">
    <meta property="og:description" content="Discover our wide selection of premium coffee drinks.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085">
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Link to your main stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Additional Menu Page Styles -->
    <style>
        /* Menu Page Specific Styles */
        .page-header {
            padding: 8rem 2rem 4rem;
            text-align: center;
            background: linear-gradient(rgba(26,18,11,0.9), rgba(26,18,11,0.9)), url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .page-header h1 {
            font-size: 4rem;
            color: var(--cream);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }
        
        .page-header h1 span {
            color: var(--light-brown);
        }
        
        .page-header p {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .menu-section {
            padding: 5rem 2rem;
            background: var(--primary-dark);
        }
        
        /* Category Filters */
        .category-filters {
            max-width: 1400px;
            margin: 0 auto 3rem;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .category-btn {
            padding: 0.8rem 2rem;
            border: 2px solid var(--light-brown);
            background: transparent;
            color: var(--cream);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }
        
        .category-btn:hover,
        .category-btn.active {
            background: var(--light-brown);
            color: var(--primary-dark);
        }
        
        /* Menu Grid */
        .menu-grid {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
        }
        
        .menu-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(166, 123, 91, 0.2);
            transition: all 0.3s ease;
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .menu-card:hover {
            transform: translateY(-10px);
            border-color: var(--light-brown);
            box-shadow: var(--shadow-lg);
        }
        
        .menu-image {
            height: 220px;
            overflow: hidden;
            position: relative;
        }
        
        .menu-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .menu-card:hover .menu-image img {
            transform: scale(1.1);
        }
        
        .menu-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--light-brown);
            color: var(--primary-dark);
            padding: 0.3rem 1rem;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .menu-badge i {
            font-size: 0.7rem;
        }
        
        .menu-info {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .menu-category {
            color: var(--light-brown);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.3rem;
        }
        
        .menu-name {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--cream);
            font-family: 'Playfair Display', serif;
        }
        
        .menu-description {
            color: var(--text-light);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1rem;
            flex: 1;
        }
        
        .menu-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .menu-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--light-brown);
        }
        
        .add-to-cart-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--light-brown);
            border: none;
            color: var(--primary-dark);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateY(10px);
        }
        
        .menu-card:hover .add-to-cart-btn {
            opacity: 1;
            transform: translateY(0);
        }
        
        .add-to-cart-btn:hover {
            background: var(--cream);
            transform: scale(1.1) rotate(360deg);
        }
        
        /* Hot/Cold Indicators */
        .temp-indicator {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.5);
            color: var(--cream);
            padding: 0.3rem;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 2;
        }
        
        .temp-indicator.hot {
            color: #ff6b6b;
        }
        
        .temp-indicator.cold {
            color: #6bb5ff;
        }
        
        /* Cart Sidebar Styles */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: var(--primary-dark);
            border-left: 2px solid var(--light-brown);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.3);
            transition: right 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(166, 123, 91, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h3 {
            color: var(--cream);
            font-family: 'Playfair Display', serif;
            margin: 0;
        }

        .cart-header h3 i {
            color: var(--light-brown);
            margin-right: 0.5rem;
        }

        .close-cart {
            background: transparent;
            border: none;
            color: var(--cream);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-cart:hover {
            color: var(--light-brown);
            transform: rotate(90deg);
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid rgba(166, 123, 91, 0.3);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            color: var(--cream);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .total-amount {
            color: var(--light-brown);
            font-size: 1.4rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: var(--light-brown);
            border: none;
            border-radius: 10px;
            color: var(--primary-dark);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .checkout-btn:hover {
            background: var(--cream);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(166, 123, 91, 0.4);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--light-brown);
            color: var(--primary-dark);
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            z-index: 1001;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .menu-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 992px) {
            .menu-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .page-header h1 {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 768px) {
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
        
        @media (max-width: 576px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .category-filters {
                gap: 0.5rem;
            }
            
            .category-btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar (same as home page) -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-mug-hot"></i>
                <a href="index.html">Java<span>Buzz</span></a>
            </div>
            
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html" class="active">Menu</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="index.html#location">Location</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>

            <div class="nav-icons">
                <a href="#" class="cart-icon" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
            </div>

            <div class="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <h1>Our <span>Menu</span></h1>
        <p>Discover our carefully crafted coffee selection, made with passion and precision</p>
    </section>

    <!-- Menu Section -->
    <section class="menu-section">
        <!-- Category Filters -->
        <div class="category-filters">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="espresso">Espresso</button>
            <button class="category-btn" data-category="milk">Milk Coffee</button>
            <button class="category-btn" data-category="cold">Cold Coffee</button>
            <button class="category-btn" data-category="special">Specialty</button>
            <button class="category-btn" data-category="pastry">Pastries</button>
        </div>

        <!-- Menu Grid -->
        <div class="menu-grid" id="menuGrid"></div>
    </section>

    <!-- Footer (same as home page) -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <i class="fas fa-mug-hot"></i>
                    <h3>Java<span>Buzz</span></h3>
                </div>
                <p>Your perfect cup of coffee awaits. Experience the finest coffee in town with our premium blends and cozy atmosphere.</p>
            </div>
            
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="menu.html">Menu</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Categories</h4>
                <ul>
                    <li><a href="#" onclick="filterMenu('espresso'); return false;">Espresso</a></li>
                    <li><a href="#" onclick="filterMenu('milk'); return false;">Milk Coffee</a></li>
                    <li><a href="#" onclick="filterMenu('cold'); return false;">Cold Coffee</a></li>
                    <li><a href="#" onclick="filterMenu('special'); return false;">Specialty</a></li>
                    <li><a href="#" onclick="filterMenu('pastry'); return false;">Pastries</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Newsletter</h4>
                <p>Subscribe for exclusive offers!</p>
                <form class="footer-newsletter" id="footerNewsletter">
                    <input type="email" placeholder="Your Email">
                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 Java Buzz Coffee Shop. All rights reserved. | Made with <i class="fas fa-heart"></i> in Lahore</p>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Your Order</h3>
            <button class="close-cart" onclick="toggleCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-items" id="cartItems"></div>
        
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-amount" id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">
                <span>Checkout</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Main JavaScript -->
    <script>
// ===== COFFEE MENU DATA (20 Items) =====
const coffeeMenu = [
    // ESPRESSO CATEGORY (4 items)
    {
        id: 1,
        name: "Classic Espresso",
        category: "espresso",
        price: 3.99,
        image: "https://images.unsplash.com/photo-1510707577719-ae7c14805e6a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Rich and bold single shot espresso with perfect crema",
        rating: 4.8,
        temp: "hot",
        bestseller: true
    },
    {
        id: 2,
        name: "Double Espresso",
        category: "espresso",
        price: 4.99,
        image: "https://images.unsplash.com/photo-1572442388796-11668a67e53d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Double shot of intense espresso for extra kick",
        rating: 4.9,
        temp: "hot"
    },
    {
        id: 3,
        name: "Espresso Macchiato",
        category: "espresso",
        price: 4.49,
        image: "https://images.unsplash.com/photo-1610632380989-680fe40816c6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Espresso topped with a dash of foamy milk",
        rating: 4.7,
        temp: "hot"
    },
    {
        id: 4,
        name: "Ristretto",
        category: "espresso",
        price: 4.29,
        image: "https://images.unsplash.com/photo-1594046243099-2b19c50a6e6a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Short shot of espresso - sweeter and more concentrated",
        rating: 4.8,
        temp: "hot"
    },
    
    // MILK COFFEE CATEGORY (5 items)
    {
        id: 5,
        name: "Cappuccino",
        category: "milk",
        price: 4.99,
        image: "https://images.unsplash.com/photo-1534778101976-62847782c213?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Equal parts espresso, steamed milk, and foam",
        rating: 4.9,
        temp: "hot",
        bestseller: true
    },
    {
        id: 6,
        name: "Caffe Latte",
        category: "milk",
        price: 5.49,
        image: "https://images.unsplash.com/photo-1570968915860-54d5c301fa9f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Smooth espresso with lots of steamed milk",
        rating: 4.8,
        temp: "hot"
    },
    {
        id: 7,
        name: "Flat White",
        category: "milk",
        price: 5.29,
        image: "https://images.unsplash.com/photo-1666520111579-5e843b56f8b0?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Australian style with velvety microfoam",
        rating: 4.8,
        temp: "hot"
    },
    {
        id: 8,
        name: "Mocha Latte",
        category: "milk",
        price: 5.99,
        image: "https://images.unsplash.com/photo-1578314675249-a6910f80cc39?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Espresso with chocolate and steamed milk",
        rating: 4.9,
        temp: "hot",
        bestseller: true
    },
    {
        id: 9,
        name: "Caramel Latte",
        category: "milk",
        price: 6.49,
        image: "https://images.unsplash.com/photo-1485808191679-5f86510681a2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Rich latte with caramel syrup and whipped cream",
        rating: 4.9,
        temp: "hot"
    },
    
    // COLD COFFEE CATEGORY (5 items)
    {
        id: 10,
        name: "Cold Brew",
        category: "cold",
        price: 5.49,
        image: "https://images.unsplash.com/photo-1517701604599-bb29b565090c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "12-hour steeped smooth cold coffee",
        rating: 4.8,
        temp: "cold",
        bestseller: true
    },
    {
        id: 11,
        name: "Iced Latte",
        category: "cold",
        price: 5.29,
        image: "https://images.unsplash.com/photo-1517701604599-bb29b565090c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Chilled latte served over ice",
        rating: 4.7,
        temp: "cold"
    },
    {
        id: 12,
        name: "Iced Caramel Macchiato",
        category: "cold",
        price: 6.49,
        image: "https://images.unsplash.com/photo-1517701604599-bb29b565090c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Vanilla, milk, espresso and caramel over ice",
        rating: 4.9,
        temp: "cold"
    },
    {
        id: 13,
        name: "Nitro Cold Brew",
        category: "cold",
        price: 6.99,
        image: "https://images.unsplash.com/photo-1594056142207-db9c5f3f7b9b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Nitrogen-infused cold brew with creamy texture",
        rating: 5.0,
        temp: "cold",
        bestseller: true
    },
    {
        id: 14,
        name: "Frappuccino",
        category: "cold",
        price: 6.49,
        image: "https://images.unsplash.com/photo-1572490122747-3968b75cc699?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Blended coffee with cream and caramel",
        rating: 4.9,
        temp: "cold"
    },
    
    // SPECIALTY CATEGORY (4 items)
    {
        id: 15,
        name: "Affogato",
        category: "special",
        price: 7.99,
        image: "https://images.unsplash.com/photo-1577803647701-0c3e3a4c8b3a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Espresso poured over vanilla gelato",
        rating: 4.9,
        temp: "cold",
        bestseller: true
    },
    {
        id: 16,
        name: "Turkish Coffee",
        category: "special",
        price: 5.99,
        image: "https://images.unsplash.com/photo-1587080413959-06b859fb107d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Traditional unfiltered coffee brewed in cezve",
        rating: 4.8,
        temp: "hot"
    },
    {
        id: 17,
        name: "Irish Coffee",
        category: "special",
        price: 8.99,
        image: "https://images.unsplash.com/photo-1514517604298-cf80e0fb7f1e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Coffee with Irish whiskey and cream",
        rating: 4.7,
        temp: "hot"
    },
    {
        id: 18,
        name: "Vietnamese Egg Coffee",
        category: "special",
        price: 7.49,
        image: "https://images.unsplash.com/photo-1523207911-4a6f6f5b1b1b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Rich coffee with creamy egg yolk and condensed milk",
        rating: 4.9,
        temp: "hot"
    },
    
    // PASTRY CATEGORY (2 items)
    {
        id: 19,
        name: "Chocolate Croissant",
        category: "pastry",
        price: 4.49,
        image: "https://images.unsplash.com/photo-1555507036-ab1f4038808a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Buttery croissant with chocolate filling",
        rating: 4.8,
        temp: "pastry"
    },
    {
        id: 20,
        name: "Cinnamon Roll",
        category: "pastry",
        price: 4.99,
        image: "https://images.unsplash.com/photo-1509365465985-25d11c17e812?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
        description: "Soft roll with cinnamon and cream cheese",
        rating: 4.9,
        temp: "pastry",
        bestseller: true
    }
];

// Make coffeeMenu globally available
window.coffeeMenu = coffeeMenu;

// ===== CART VARIABLES =====
let cart = [];

// ===== LOAD CART FROM LOCALSTORAGE =====
function loadCart() {
    const saved = localStorage.getItem('javaBuzzCart');
    if (saved) {
        cart = JSON.parse(saved);
        updateCartCount();
        updateCartSidebar();
    }
}

// ===== UPDATE CART COUNT IN NAVBAR =====
function updateCartCount() {
    const cartCount = document.getElementById('cartCount');
    if (!cartCount) return;
    
    const count = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCount.textContent = count;
    
    // Animation
    cartCount.style.transform = 'scale(1.2)';
    setTimeout(() => {
        cartCount.style.transform = 'scale(1)';
    }, 200);
}

// ===== UPDATE CART SIDEBAR =====
function updateCartSidebar() {
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    
    if (!cartItems || !cartTotal) return;
    
    if (cart.length === 0) {
        cartItems.innerHTML = `
            <div style="text-align: center; padding: 2rem; color: var(--text-light);">
                <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                <p>Your cart is empty</p>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Add items from the menu!</p>
            </div>
        `;
        cartTotal.textContent = '$0.00';
        return;
    }
    
    cartItems.innerHTML = cart.map(item => `
        <div class="cart-item" style="
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid rgba(166, 123, 91, 0.2);
        ">
            <img src="${item.image}" alt="${item.name}" style="
                width: 60px;
                height: 60px;
                border-radius: 10px;
                object-fit: cover;
            ">
            <div style="flex: 1;">
                <h4 style="margin: 0 0 0.3rem; color: var(--cream); font-size: 1rem;">${item.name}</h4>
                <div style="color: var(--light-brown); font-weight: 600; margin-bottom: 0.5rem;">
                    $${(item.price * item.quantity).toFixed(2)}
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <button onclick="updateQuantity(${item.id}, -1, event)" style="
                        width: 25px;
                        height: 25px;
                        border-radius: 5px;
                        border: 1px solid var(--light-brown);
                        background: transparent;
                        color: var(--cream);
                        cursor: pointer;
                    ">-</button>
                    <span style="color: var(--cream); min-width: 30px; text-align: center;">${item.quantity}</span>
                    <button onclick="updateQuantity(${item.id}, 1, event)" style="
                        width: 25px;
                        height: 25px;
                        border-radius: 5px;
                        border: 1px solid var(--light-brown);
                        background: transparent;
                        color: var(--cream);
                        cursor: pointer;
                    ">+</button>
                    <button onclick="removeFromCart(${item.id}, event)" style="
                        background: transparent;
                        border: none;
                        color: #ff6b6b;
                        cursor: pointer;
                        margin-left: auto;
                    ">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        </div>
    `).join('');
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    cartTotal.textContent = `$${total.toFixed(2)}`;
}

// ===== ADD TO CART FUNCTION =====
function addToCart(productId) {
    const product = coffeeMenu.find(p => p.id === productId);
    if (!product) return;
    
    const existingItem = cart.find(item => item.id === productId);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            ...product,
            quantity: 1
        });
    }
    
    // Save to localStorage
    localStorage.setItem('javaBuzzCart', JSON.stringify(cart));
    
    // Update UI
    updateCartCount();
    updateCartSidebar();
    
    // Show toast
    showToast(`${product.name} added to your order!`);
    
    // Animate cart icon
    const cartIcon = document.querySelector('.cart-icon');
    if (cartIcon) {
        cartIcon.style.transform = 'scale(1.2)';
        setTimeout(() => {
            cartIcon.style.transform = 'scale(1)';
        }, 200);
    }
    
    // Open cart sidebar
    const cartSidebar = document.getElementById('cartSidebar');
    if (cartSidebar) {
        cartSidebar.classList.add('active');
    }
}

// ===== UPDATE QUANTITY (with event parameter to stop propagation) =====
function updateQuantity(productId, change, event) {
    // Stop event from bubbling up to document
    if (event) {
        event.stopPropagation();
    }
    
    const item = cart.find(item => item.id === productId);
    if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
            cart = cart.filter(item => item.id !== productId);
            showToast('Item removed from order');
        }
        
        localStorage.setItem('javaBuzzCart', JSON.stringify(cart));
        updateCartCount();
        updateCartSidebar();
    }
}

// ===== REMOVE FROM CART (with event parameter to stop propagation) =====
function removeFromCart(productId, event) {
    // Stop event from bubbling up to document
    if (event) {
        event.stopPropagation();
    }
    
    const product = cart.find(item => item.id === productId);
    cart = cart.filter(item => item.id !== productId);
    
    localStorage.setItem('javaBuzzCart', JSON.stringify(cart));
    updateCartCount();
    updateCartSidebar();
    
    if (product) {
        showToast(`${product.name} removed from order`);
    }
}

// ===== CHECKOUT FUNCTION =====
function checkout() {
    if (cart.length === 0) {
        showToast('Your cart is empty!');
        return;
    }
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    showToast(`Order placed! Total: $${total.toFixed(2)}. Thank you for choosing Java Buzz!`);
    
    // Clear cart
    cart = [];
    localStorage.removeItem('javaBuzzCart');
    updateCartCount();
    updateCartSidebar();
    toggleCart();
}

// ===== TOGGLE CART =====
function toggleCart() {
    const cartSidebar = document.getElementById('cartSidebar');
    if (cartSidebar) {
        cartSidebar.classList.toggle('active');
    }
}

// ===== DISPLAY MENU =====
function displayMenu(category = 'all') {
    const menuGrid = document.getElementById('menuGrid');
    if (!menuGrid) return;
    
    const filtered = category === 'all' 
        ? coffeeMenu 
        : coffeeMenu.filter(item => item.category === category);
    
    menuGrid.innerHTML = filtered.map(item => {
        const tempIcon = item.temp === 'hot' ? 'üî•' : item.temp === 'cold' ? '‚ùÑÔ∏è' : 'ü•ê';
        const tempClass = item.temp === 'hot' ? 'hot' : item.temp === 'cold' ? 'cold' : '';
        
        return `
        <div class="menu-card">
            <div class="menu-image">
                <img src="${item.image}" alt="${item.name}">
                ${item.bestseller ? '<span class="menu-badge"><i class="fas fa-crown"></i> Bestseller</span>' : ''}
                <div class="temp-indicator ${tempClass}">
                    ${tempIcon}
                </div>
            </div>
            <div class="menu-info">
                <span class="menu-category">${item.category}</span>
                <h3 class="menu-name">${item.name}</h3>
                <p class="menu-description">${item.description}</p>
                <div class="menu-footer">
                    <span class="menu-price">$${item.price.toFixed(2)}</span>
                    <button class="add-to-cart-btn" onclick="addToCart(${item.id})">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
        </div>
    `}).join('');
}

// ===== FILTER MENU =====
function filterMenu(category) {
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.category === category) {
            btn.classList.add('active');
        }
    });
    displayMenu(category);
}

// ===== TOAST NOTIFICATION =====
function showToast(message) {
    const toast = document.getElementById('toast');
    if (!toast) return;
    
    toast.textContent = message;
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

// ===== CHECK IF CLICK IS INSIDE CART SIDEBAR =====
function isClickInsideCartSidebar(element) {
    return element.closest('#cartSidebar') !== null || element.closest('.cart-icon') !== null;
}

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', () => {
    displayMenu('all');
    loadCart(); // Load cart from localStorage
    
    // Category filter buttons
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            filterMenu(btn.dataset.category);
        });
    });
    
    // Navbar scroll effect
    window.addEventListener('scroll', () => {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
    
    // Mobile menu
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');
    
    if (hamburger) {
        hamburger.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
    }
    
    // Close menu on link click
    document.querySelectorAll('.nav-menu a').forEach(link => {
        link.addEventListener('click', () => {
            navMenu.classList.remove('active');
        });
    });
    
    // Close cart when clicking outside - FIXED VERSION
    document.addEventListener('click', (e) => {
        const cartSidebar = document.getElementById('cartSidebar');
        const cartIcon = document.querySelector('.cart-icon');
        
        if (cartSidebar && cartSidebar.classList.contains('active')) {
            // Check if click is outside cart sidebar and not on cart icon
            if (!cartSidebar.contains(e.target) && !cartIcon.contains(e.target)) {
                cartSidebar.classList.remove('active');
            }
        }
    });
    
    // Footer newsletter
    document.getElementById('footerNewsletter')?.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = e.target.querySelector('input').value;
        showToast(`Thanks for subscribing with ${email}!`);
        e.target.reset();
    });
});

// Make functions globally available for onclick events
window.toggleCart = toggleCart;
window.checkout = checkout;
window.addToCart = addToCart;
window.filterMenu = filterMenu;
window.showToast = showToast;
window.updateQuantity = updateQuantity;
window.removeFromCart = removeFromCart;
    </script>
</body>
</html>